<div class="books container">
    <h1>Books Available</h1>

    <input type="text" id="myInput" onkeyup="myFunction()" placeholder="Search for names..">

    <table id="myTable" table class="table">
        <tr>
            <th>Book Title</th>
            <th>Author</th>
            <th>Cost</th>
            <th>Publisher</th>
            <th>Book Cover</th>
            <th></th>
        </tr>
        
        {{#each books}}
        <tr>
            <td><a href="/books/{{id}}">{{title}}</a></td>
            <td><a href="/authors/{{Author.id}}">{{Author.name}}</a></td>
            <td>
                <script type="text/javascript">
                    var dollar_cost = {{priceCents}} / 100
                    document.write('$' + dollar_cost.toFixed(2))
                </script>
            </td>
            <td>{{publisher}}</td>
            <td><img id="myImg" src={{coverUrl}} width="125" height="75"></td>
            <td><button class="btn btn-primary">Add to cart</button></td>
        {{/each}}
        </tr>
    </table>
</div>

<script>
function myFunction() {
    var input, filter, table, tr, td, i, t;
    input = document.getElementById("myInput");
    filter = input.value.toUpperCase();
    table = document.getElementById("myTable");
    tr = table.getElementsByTagName("tr");
    for (i = 1; i < tr.length; i++) {
        var filtered = false;
        var tds = tr[i].getElementsByTagName("td");
            for(t=0; t<tds.length; t++) {
                var td = tds[t];
                if (td) {
                    if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
                        filtered = true;
                        }
                }     
            }
        if(filtered===true) {
            tr[i].style.display = '';
        }
        else {
            tr[i].style.display = 'none';
        }
    }
}
</script>
<!-- The Modal -->
<div id="myModal" class="modal">

<!-- The Close Button -->
<span class="close" onclick="document.getElementById('myModal').style.display='none'">&times;</span>

<!-- Modal Content (The Image) -->
<img class="modal-content" id="img01">

<!-- Modal Caption (Image Text) -->
<div id="caption"></div>
</div>

<script>
// Get the modal
var modal = document.getElementById('myModal');

// Get the image and insert it inside the modal - use its "alt" text as a caption
var img = document.getElementById('myImg');
var modalImg = document.getElementById("img01");
var captionText = document.getElementById("caption");
img.onclick = function(){
    modal.style.display = "block";
    modalImg.src = this.src;
    modalImg.alt = this.alt;
    captionText.innerHTML = this.alt;
}

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on <span> (x), close the modal
span.onclick = function() { 
    modal.style.display = "none";
}
</script>



